# PRD: í´ë˜ìŠ¤ ë“±ë¡ ê¸°ëŠ¥

**ì‘ì„±ì¼**: 2025-01-14  
**ì‘ì„±ì**: zionge2k  
**ë¸Œëœì¹˜**: `40-feature-register-class`  
**ìƒíƒœ**: ğŸ“ Draft

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#1-ê°œìš”)
2. [ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­](#2-ë¹„ì¦ˆë‹ˆìŠ¤-ìš”êµ¬ì‚¬í•­)
3. [ê¸°ëŠ¥ ëª…ì„¸](#3-ê¸°ëŠ¥-ëª…ì„¸)
4. [ë°ì´í„° ëª¨ë¸](#4-ë°ì´í„°-ëª¨ë¸)
5. [API ëª…ì„¸](#5-api-ëª…ì„¸)
6. [ìœ íš¨ì„± ê²€ì¦ ê·œì¹™](#6-ìœ íš¨ì„±-ê²€ì¦-ê·œì¹™)
7. [ì—ëŸ¬ ì²˜ë¦¬](#7-ì—ëŸ¬-ì²˜ë¦¬)
8. [ì œì•½ì‚¬í•­ ë° ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™](#8-ì œì•½ì‚¬í•­-ë°-ë¹„ì¦ˆë‹ˆìŠ¤-ê·œì¹™)
9. [êµ¬í˜„ ë²”ìœ„](#9-êµ¬í˜„-ë²”ìœ„)
10. [í–¥í›„ í™•ì¥ ê³„íš](#10-í–¥í›„-í™•ì¥-ê³„íš)

---

## 1. ê°œìš”

### 1.1 ëª©ì 

ì‚¬ìš©ìê°€ ìì‹ ì´ ì§„í–‰í•  í´ë˜ìŠ¤(ê°•ì˜)ë¥¼ ì‹œìŠ¤í…œì— ë“±ë¡í•˜ì—¬, ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ì´ ì˜ˆì•½í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

### 1.2 ì£¼ìš” íŠ¹ì§•

- **ë‹¤ì¤‘ ë‚ ì§œ ì„ íƒ**: ê°™ì€ ê°•ì˜ë¥¼ ì—¬ëŸ¬ ë‚ ì§œì— í•œ ë²ˆì— ë“±ë¡ ê°€ëŠ¥
- **ì‹œê°„ ì¤‘ë³µ ë°©ì§€**: ê°™ì€ ê°•ì‚¬ê°€ ë™ì¼ ì‹œê°„ì— ì—¬ëŸ¬ í´ë˜ìŠ¤ ë“±ë¡ ë¶ˆê°€
- **ì´ë¯¸ì§€ ê´€ë¦¬**: ìµœì†Œ 1ê°œ, ìµœëŒ€ 8ê°œì˜ ì´ë¯¸ì§€ ë“±ë¡ (ëŒ€í‘œ ì´ë¯¸ì§€ 1ê°œ í•„ìˆ˜)
- **ìœ„ì¹˜ ì •ë³´**: ì£¼ì†Œ, ì¢Œí‘œ, ìš°í¸ë²ˆí˜¸ ì €ì¥ (ì¶”í›„ Kakao Map API ì—°ë™ ì˜ˆì •)

### 1.3 ì‚¬ìš©ì

- **ëŒ€ìƒ**: ëª¨ë“  ì¸ì¦ëœ ì‚¬ìš©ì (Role êµ¬ë¶„ ì—†ìŒ)
- **ê¶Œí•œ**: ë¡œê·¸ì¸í•œ ëª¨ë“  ì‚¬ìš©ìê°€ í´ë˜ìŠ¤ ë“±ë¡ ê°€ëŠ¥
- **ë¹„ê³ **: ì‹œìŠ¤í…œ ë‚´ ëª¨ë“  ì‚¬ìš©ìëŠ” í•™ìƒì´ì ì„ ìƒë‹˜ì´ ë  ìˆ˜ ìˆìŒ

---

## 2. ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­

### 2.1 í•µì‹¬ ìš”êµ¬ì‚¬í•­

| ìš”êµ¬ì‚¬í•­ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|---------|------|---------|
| ë‹¤ì¤‘ ë‚ ì§œ ë“±ë¡ | ê°™ì€ ê°•ì˜ë¥¼ ì—¬ëŸ¬ ë‚ ì§œì— í•œ ë²ˆì— ë“±ë¡ | â­â­â­ |
| ì‹œê°„ ì¤‘ë³µ ë°©ì§€ | ê°™ì€ ê°•ì‚¬ì˜ ì‹œê°„ ì¶©ëŒ ì²´í¬ | â­â­â­ |
| ì´ë¯¸ì§€ ê´€ë¦¬ | ìµœì†Œ 1ê°œ, ìµœëŒ€ 8ê°œ, ëŒ€í‘œ ì´ë¯¸ì§€ 1ê°œ | â­â­â­ |
| ìœ„ì¹˜ ì •ë³´ ì €ì¥ | ì£¼ì†Œ, ì¢Œí‘œ, ìš°í¸ë²ˆí˜¸ ì €ì¥ | â­â­ |
| ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ | ë¯¸ë¦¬ ì •ì˜ëœ ì¹´í…Œê³ ë¦¬ë¡œ ë¶„ë¥˜ | â­â­ |

### 2.2 ë¹„ì¦ˆë‹ˆìŠ¤ ì‹œë‚˜ë¦¬ì˜¤

#### ì‹œë‚˜ë¦¬ì˜¤ 1: ê¸°ë³¸ í´ë˜ìŠ¤ ë“±ë¡

```
ì‚¬ìš©ìê°€ "í™ˆ ë² ì´í‚¹ í´ë˜ìŠ¤"ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ë“±ë¡:
- ë‚ ì§œ: 2025-01-20, 2025-01-22, 2025-01-24
- ì‹œê°„: 14:00 ~ 16:00
- ê²°ê³¼: 3ê°œì˜ Times ë ˆì½”ë“œ ìƒì„± (ê°™ì€ Classesì— ì—°ê²°)
```

#### ì‹œë‚˜ë¦¬ì˜¤ 2: ê°™ì€ ë‚ ì§œ, ë‹¤ë¥¸ ì‹œê°„

```
ì‚¬ìš©ìê°€ ê°™ì€ ë‚ ì§œì— ë‹¤ë¥¸ ì‹œê°„ëŒ€ì˜ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€ë¡œ ë“±ë¡í•˜ê³  ì‹¶ì€ ê²½ìš°:
1. ì²« ë²ˆì§¸ ë“±ë¡: 2025-01-20, 14:00~16:00 (ë² ì´í‚¹ ê¸°ì´ˆ)
2. ë‘ ë²ˆì§¸ ë“±ë¡: 2025-01-20, 18:00~20:00 (ë² ì´í‚¹ ì‹¬í™”)
â†’ ë³„ë„ì˜ API í˜¸ì¶œë¡œ ìƒˆë¡œìš´ í´ë˜ìŠ¤ ìƒì„±
```

#### ì‹œë‚˜ë¦¬ì˜¤ 3: ì‹œê°„ ì¤‘ë³µ ë°©ì§€

```
ì‚¬ìš©ìê°€ ì´ë¯¸ ë“±ë¡í•œ ì‹œê°„ê³¼ ê²¹ì¹˜ëŠ” í´ë˜ìŠ¤ ë“±ë¡ ì‹œë„:
- ê¸°ì¡´: 2025-01-20, 14:00~16:00
- ì‹œë„: 2025-01-20, 15:00~17:00 (1ì‹œê°„ ê²¹ì¹¨)
â†’ 409 Conflict ì—ëŸ¬ ë°œìƒ
```

---

## 3. ê¸°ëŠ¥ ëª…ì„¸

### 3.1 í´ë˜ìŠ¤ ë“±ë¡ í”„ë¡œì„¸ìŠ¤

```mermaid
graph TD
    A[ì‚¬ìš©ì ë¡œê·¸ì¸] --> B[í´ë˜ìŠ¤ ë“±ë¡ í™”ë©´]
    B --> C[ê¸°ë³¸ ì •ë³´ ì…ë ¥]
    C --> D[ë‚ ì§œ ë‹¤ì¤‘ ì„ íƒ]
    D --> E[ì‹œê°„ ì„ íƒ]
    E --> F[ì´ë¯¸ì§€ ì—…ë¡œë“œ 1~8ê°œ]
    F --> G[ëŒ€í‘œ ì´ë¯¸ì§€ 1ê°œ ì§€ì •]
    G --> H[ìœ„ì¹˜ ì •ë³´ ì…ë ¥]
    H --> I[ì œì¶œ]
    I --> J{ìœ íš¨ì„± ê²€ì¦}
    J -->|ì‹¤íŒ¨| K[ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ]
    K --> B
    J -->|ì„±ê³µ| L{ì‹œê°„ ì¤‘ë³µ ì²´í¬}
    L -->|ì¤‘ë³µ| M[ì‹œê°„ ì¤‘ë³µ ì—ëŸ¬]
    M --> D
    L -->|ì¤‘ë³µ ì—†ìŒ| N[DB ì €ì¥]
    N --> O[ì„±ê³µ ì‘ë‹µ]
```

### 3.2 ì…ë ¥ í•­ëª©

#### í•„ìˆ˜ ì…ë ¥ í•­ëª©

| í•„ë“œ | íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
|-----|------|---------|------|
| `className` | String | max=50, not blank | í´ë˜ìŠ¤ëª… |
| `category` | Enum | not null | ì¹´í…Œê³ ë¦¬ (ê³ ì • ëª©ë¡) |
| `maxCapacity` | Integer | min=1, not null | ìµœëŒ€ ìˆ˜ìš© ì¸ì› |
| `price` | Integer | min=0, not null | ê°€ê²© (ì›) |
| `dates` | List\<LocalDate\> | not empty, future | ë‚ ì§œ ëª©ë¡ (ë‹¤ì¤‘ ì„ íƒ) |
| `startTime` | LocalTime | not null | ì‹œì‘ ì‹œê°„ |
| `endTime` | LocalTime | not null | ì¢…ë£Œ ì‹œê°„ |
| `images` | List\<ImageRequest\> | 1~8ê°œ | ì´ë¯¸ì§€ ëª©ë¡ |

#### ì„ íƒ ì…ë ¥ í•­ëª©

| í•„ë“œ | íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
|-----|------|---------|------|
| `classDetail` | String | max=255 | í´ë˜ìŠ¤ ìƒì„¸ ì„¤ëª… |
| `curriculum` | String | max=255 | ì»¤ë¦¬í˜ëŸ¼ |
| `included` | String | max=255 | í¬í•¨ ì‚¬í•­ |
| `required` | String | max=255 | ì¤€ë¹„ë¬¼ |
| `location` | String | max=255 | ì£¼ì†Œ |
| `longitude` | String | max=20 | ê²½ë„ |
| `latitude` | String | max=20 | ìœ„ë„ |
| `zipcode` | String | max=10 | ìš°í¸ë²ˆí˜¸ |

#### ì´ë¯¸ì§€ ì •ë³´

| í•„ë“œ | íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
|-----|------|---------|------|
| `imageUrl` | String | not blank | ì´ë¯¸ì§€ URL (ë¡œì»¬ ì„œë²„ ê²½ë¡œ) |
| `isRepresentative` | Boolean | - | ëŒ€í‘œ ì´ë¯¸ì§€ ì—¬ë¶€ (ì •í™•íˆ 1ê°œë§Œ true) |

### 3.3 ì¹´í…Œê³ ë¦¬ ëª©ë¡ (Enum)

```java
public enum CategoryType {
    COOKING("ìš”ë¦¬"),
    BAKING("ë² ì´í‚¹"),
    ART("ë¯¸ìˆ "),
    MUSIC("ìŒì•…"),
    SPORTS("ìš´ë™"),
    DANCE("ëŒ„ìŠ¤"),
    LANGUAGE("ì–¸ì–´"),
    IT("IT/í”„ë¡œê·¸ë˜ë°"),
    PHOTO("ì‚¬ì§„"),
    CRAFTS("ê³µì˜ˆ");
}
```

---

## 4. ë°ì´í„° ëª¨ë¸

### 4.1 ERD

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Users       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚
â”‚ email           â”‚
â”‚ name            â”‚
â”‚ ...             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ 1
        â”‚
        â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Categories    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ category_id(PK) â”‚
â”‚ category (Enum) â”‚
â”‚ name            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ 1
        â”‚
        â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Classes      â”‚ 1     N â”‚     Times       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€â”€â”€â”€â”€â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ class_id (PK)   â”‚         â”‚ time_id (PK)    â”‚
â”‚ teacher_id (FK) â”‚         â”‚ class_id (FK)   â”‚
â”‚ category_id(FK) â”‚         â”‚ start_at        â”‚
â”‚ class_name      â”‚         â”‚ end_at          â”‚
â”‚ class_detail    â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ curriculum      â”‚
â”‚ included        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ required        â”‚ 1     N â”‚     Images      â”‚
â”‚ max_capacity    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ price           â”‚         â”‚ image_id (PK)   â”‚
â”‚ location        â”‚         â”‚ class_id (FK)   â”‚
â”‚ longitude       â”‚         â”‚ image_url       â”‚
â”‚ latitude        â”‚         â”‚ is_representativeâ”‚
â”‚ zipcode         â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 í…Œì´ë¸” ê´€ê³„

- **Users 1 : N Classes** - í•œ ì‚¬ìš©ì(ê°•ì‚¬)ëŠ” ì—¬ëŸ¬ í´ë˜ìŠ¤ë¥¼ ë“±ë¡ ê°€ëŠ¥
- **Categories 1 : N Classes** - í•œ ì¹´í…Œê³ ë¦¬ì— ì—¬ëŸ¬ í´ë˜ìŠ¤ ì¡´ì¬
- **Classes 1 : N Times** - í•œ í´ë˜ìŠ¤ëŠ” ì—¬ëŸ¬ ì‹œê°„ëŒ€ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŒ
- **Classes 1 : N Images** - í•œ í´ë˜ìŠ¤ëŠ” ì—¬ëŸ¬ ì´ë¯¸ì§€ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŒ

### 4.3 íŠ¸ëœì­ì…˜ ë²”ìœ„

```sql
-- í•œ ë²ˆì˜ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì²˜ë¦¬
BEGIN TRANSACTION;

-- 1. Classes ìƒì„±
INSERT INTO classes (...) VALUES (...);

-- 2. Times ìƒì„± (ë‹¤ì¤‘ ë‚ ì§œ)
INSERT INTO times (class_id, start_at, end_at) VALUES (1, '2025-01-20 14:00', '2025-01-20 16:00');
INSERT INTO times (class_id, start_at, end_at) VALUES (1, '2025-01-22 14:00', '2025-01-22 16:00');
INSERT INTO times (class_id, start_at, end_at) VALUES (1, '2025-01-24 14:00', '2025-01-24 16:00');

-- 3. Images ìƒì„±
INSERT INTO images (class_id, image_url, is_representative) VALUES (1, '/uploads/img1.jpg', true);
INSERT INTO images (class_id, image_url, is_representative) VALUES (1, '/uploads/img2.jpg', false);

COMMIT;
```

---

## 5. API ëª…ì„¸

### 5.1 í´ë˜ìŠ¤ ë“±ë¡

#### Endpoint

```
POST /api/classes
```

#### Request Headers

```
Authorization: Bearer {accessToken}
Content-Type: application/json
```

#### Request Body

```json
{
  "className": "í™ˆ ë² ì´í‚¹ í´ë˜ìŠ¤",
  "category": "BAKING",
  "classDetail": "ì§‘ì—ì„œ ì‰½ê²Œ ë§Œë“œëŠ” ë¹µê³¼ ì¼€ì´í¬",
  "curriculum": "1íšŒì°¨: ì‹ë¹µ, 2íšŒì°¨: ì¼€ì´í¬",
  "included": "ì¬ë£Œë¹„, ë„êµ¬ ëŒ€ì—¬",
  "required": "ì•ì¹˜ë§ˆ",
  "maxCapacity": 10,
  "price": 50000,
  "location": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123",
  "longitude": "127.0276",
  "latitude": "37.4979",
  "zipcode": "06234",
  "dates": [
    "2025-01-20",
    "2025-01-22",
    "2025-01-24"
  ],
  "startTime": "14:00:00",
  "endTime": "16:00:00",
  "images": [
    {
      "imageUrl": "/uploads/classes/img1.jpg",
      "isRepresentative": true
    },
    {
      "imageUrl": "/uploads/classes/img2.jpg",
      "isRepresentative": false
    }
  ]
}
```

#### Response (200 OK)

```json
{
  "success": true,
  "data": {
    "classId": 1,
    "className": "í™ˆ ë² ì´í‚¹ í´ë˜ìŠ¤",
    "category": "BAKING",
    "teacherName": "í™ê¸¸ë™",
    "maxCapacity": 10,
    "price": 50000,
    "location": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123",
    "timeSlots": [
      {
        "timeId": 1,
        "startAt": "2025-01-20T14:00:00",
        "endAt": "2025-01-20T16:00:00"
      },
      {
        "timeId": 2,
        "startAt": "2025-01-22T14:00:00",
        "endAt": "2025-01-22T16:00:00"
      },
      {
        "timeId": 3,
        "startAt": "2025-01-24T14:00:00",
        "endAt": "2025-01-24T16:00:00"
      }
    ],
    "images": [
      {
        "imageId": 1,
        "imageUrl": "/uploads/classes/img1.jpg",
        "isRepresentative": true
      },
      {
        "imageId": 2,
        "imageUrl": "/uploads/classes/img2.jpg",
        "isRepresentative": false
      }
    ]
  },
  "error": null
}
```

---

## 6. ìœ íš¨ì„± ê²€ì¦ ê·œì¹™

### 6.1 ì…ë ¥ ê²€ì¦ (Jakarta Validation)

| í•„ë“œ | ê²€ì¦ ê·œì¹™ | ì—ëŸ¬ ë©”ì‹œì§€ |
|-----|----------|-----------|
| `className` | `@NotBlank`, `@Size(max=50)` | "í´ë˜ìŠ¤ëª…ì€ í•„ìˆ˜ì…ë‹ˆë‹¤", "í´ë˜ìŠ¤ëª…ì€ 50ì ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤" |
| `category` | `@NotNull` | "ì¹´í…Œê³ ë¦¬ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤" |
| `maxCapacity` | `@NotNull`, `@Min(1)` | "ìµœëŒ€ ì¸ì›ì€ í•„ìˆ˜ì…ë‹ˆë‹¤", "ìµœëŒ€ ì¸ì›ì€ 1ëª… ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤" |
| `price` | `@NotNull`, `@Min(0)` | "ê°€ê²©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤", "ê°€ê²©ì€ 0ì› ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤" |
| `dates` | `@NotEmpty` | "ìµœì†Œ 1ê°œ ì´ìƒì˜ ë‚ ì§œë¥¼ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤" |
| `dates[]` | `@Future` | "ê³¼ê±° ë‚ ì§œëŠ” ì„ íƒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤" |
| `startTime` | `@NotNull` | "ì‹œì‘ ì‹œê°„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤" |
| `endTime` | `@NotNull` | "ì¢…ë£Œ ì‹œê°„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤" |
| `images` | `@NotEmpty`, `@Size(max=8)` | "ìµœì†Œ 1ê°œ ì´ìƒì˜ ì´ë¯¸ì§€ë¥¼ ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤", "ì´ë¯¸ì§€ëŠ” ìµœëŒ€ 8ê°œê¹Œì§€ ë“±ë¡ ê°€ëŠ¥í•©ë‹ˆë‹¤" |

### 6.2 ë¹„ì¦ˆë‹ˆìŠ¤ ê²€ì¦ (Service Layer)

#### 1. ì‹œê°„ ë²”ìœ„ ê²€ì¦

```java
if (startTime.isAfter(endTime) || startTime.equals(endTime)) {
    throw new InvalidTimeRangeException("ì‹œì‘ ì‹œê°„ì€ ì¢…ë£Œ ì‹œê°„ë³´ë‹¤ ë¹¨ë¼ì•¼ í•©ë‹ˆë‹¤");
}
```

#### 2. ê³¼ê±° ì‹œê°„ ê²€ì¦

```java
LocalDateTime now = LocalDateTime.now();
if (startAt.isBefore(now)) {
    throw new ClassPastTimeException("ê³¼ê±° ì‹œê°„ì—ëŠ” í´ë˜ìŠ¤ë¥¼ ë“±ë¡í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
}
```

#### 3. 12ì‹œê°„ ì „ ë“±ë¡ ê²€ì¦

```java
if (startAt.isBefore(now.plusHours(12))) {
    throw new ClassTooSoonException("ìµœì†Œ 12ì‹œê°„ ì´í›„ë¶€í„° ë“±ë¡ ê°€ëŠ¥í•©ë‹ˆë‹¤");
}
```

#### 4. ì‹œê°„ ì¤‘ë³µ ê²€ì¦

```sql
-- ê°™ì€ ê°•ì‚¬ì˜ ê²¹ì¹˜ëŠ” ì‹œê°„ëŒ€ ì¡°íšŒ
SELECT * FROM times t
JOIN classes c ON t.class_id = c.class_id
WHERE c.teacher_id = ?
  AND (
    (t.start_at < ? AND t.end_at > ?)  -- ìƒˆ ì‹œê°„ì´ ê¸°ì¡´ ì‹œê°„ ë‚´ë¶€
    OR (t.start_at < ? AND t.end_at > ?)  -- ê¸°ì¡´ ì‹œê°„ì´ ìƒˆ ì‹œê°„ ë‚´ë¶€
  )
```

```java
List<Times> overlapping = timesRepository.findOverlappingTimes(
    teacherId, startAt, endAt
);
if (!overlapping.isEmpty()) {
    throw new ClassOverlappingTimeException("ì´ë¯¸ í•´ë‹¹ ì‹œê°„ì— ë“±ë¡ëœ í´ë˜ìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤");
}
```

#### 5. ëŒ€í‘œ ì´ë¯¸ì§€ ê²€ì¦

```java
long representativeCount = request.images().stream()
    .filter(ImageRequest::isRepresentative)
    .count();

if (representativeCount != 1) {
    throw new IllegalArgumentException("ëŒ€í‘œ ì´ë¯¸ì§€ëŠ” ì •í™•íˆ 1ê°œì—¬ì•¼ í•©ë‹ˆë‹¤");
}
```

---

## 7. ì—ëŸ¬ ì²˜ë¦¬

### 7.1 ì—ëŸ¬ ì½”ë“œ ì •ì˜

| HTTP ìƒíƒœ | ì—ëŸ¬ ì½”ë“œ | ë©”ì‹œì§€ | ë°œìƒ ì¡°ê±´ |
|----------|---------|-------|---------|
| 400 | `INVALID_INPUT_VALUE` | ì…ë ¥ê°’ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤ | Validation ì‹¤íŒ¨ |
| 400 | `CL002` | ê³¼ê±° ì‹œê°„ì—ëŠ” í´ë˜ìŠ¤ë¥¼ ë“±ë¡í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤ | ê³¼ê±° ë‚ ì§œ/ì‹œê°„ ì„ íƒ |
| 400 | `CL003` | ìµœì†Œ 12ì‹œê°„ ì´í›„ë¶€í„° ë“±ë¡ ê°€ëŠ¥í•©ë‹ˆë‹¤ | 12ì‹œê°„ ì´ë‚´ ë“±ë¡ ì‹œë„ |
| 400 | `CL005` | ì‹œì‘ ì‹œê°„ì€ ì¢…ë£Œ ì‹œê°„ë³´ë‹¤ ë¹¨ë¼ì•¼ í•©ë‹ˆë‹¤ | ìœ íš¨í•˜ì§€ ì•Šì€ ì‹œê°„ ë²”ìœ„ |
| 400 | `CL006` | ìµœì†Œ 1ê°œ ì´ìƒì˜ ì‹œê°„ëŒ€ë¥¼ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤ | ë‚ ì§œ ë¯¸ì„ íƒ |
| 400 | `CL007` | ìµœì†Œ 1ê°œ ì´ìƒì˜ ì´ë¯¸ì§€ë¥¼ ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤ | ì´ë¯¸ì§€ ë¯¸ë“±ë¡ |
| 400 | `CL008` | ì´ë¯¸ì§€ëŠ” ìµœëŒ€ 8ê°œê¹Œì§€ ë“±ë¡ ê°€ëŠ¥í•©ë‹ˆë‹¤ | ì´ë¯¸ì§€ 9ê°œ ì´ìƒ ë“±ë¡ |
| 401 | `AUTH004` | ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤ | ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ìƒíƒœ |
| 404 | `CL004` | ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì¹´í…Œê³ ë¦¬ì…ë‹ˆë‹¤ | ì˜ëª»ëœ ì¹´í…Œê³ ë¦¬ ê°’ |
| 409 | `CL001` | ì´ë¯¸ í•´ë‹¹ ì‹œê°„ì— ë“±ë¡ëœ í´ë˜ìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤ | ì‹œê°„ ì¤‘ë³µ |

### 7.2 ì—ëŸ¬ ì‘ë‹µ ì˜ˆì‹œ

#### Validation ì‹¤íŒ¨ (400)

```json
{
  "success": false,
  "data": null,
  "error": {
    "code": "INVALID_INPUT_VALUE",
    "message": "className: í´ë˜ìŠ¤ëª…ì€ í•„ìˆ˜ì…ë‹ˆë‹¤., price: ê°€ê²©ì€ 0ì› ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤."
  }
}
```

#### ì‹œê°„ ì¤‘ë³µ (409)

```json
{
  "success": false,
  "data": null,
  "error": {
    "code": "CL001",
    "message": "ì´ë¯¸ í•´ë‹¹ ì‹œê°„ì— ë“±ë¡ëœ í´ë˜ìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤: 2025-01-20T14:00 ~ 2025-01-20T16:00"
  }
}
```

#### 12ì‹œê°„ ì´ë‚´ ë“±ë¡ (400)

```json
{
  "success": false,
  "data": null,
  "error": {
    "code": "CL003",
    "message": "ìµœì†Œ 12ì‹œê°„ ì´í›„ë¶€í„° ë“±ë¡ ê°€ëŠ¥í•©ë‹ˆë‹¤"
  }
}
```

---

## 8. ì œì•½ì‚¬í•­ ë° ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™

### 8.1 ì‹œê°„ ê´€ë ¨ ê·œì¹™

| ê·œì¹™ | ì„¤ëª… | ê²€ì¦ ìœ„ì¹˜ |
|-----|------|---------|
| **ê³¼ê±° ë‚ ì§œ ë¶ˆê°€** | í˜„ì¬ ì‹œê°„ ì´ì „ì˜ ë‚ ì§œ/ì‹œê°„ ì„ íƒ ë¶ˆê°€ | Controller (`@Future`) + Service |
| **12ì‹œê°„ ì „ ë“±ë¡** | ì‹œì‘ ì‹œê°„ ê¸°ì¤€ ìµœì†Œ 12ì‹œê°„ ì „ì—ë§Œ ë“±ë¡ ê°€ëŠ¥ | Service |
| **ì‹œê°„ ë²”ìœ„ ê²€ì¦** | ì‹œì‘ ì‹œê°„ < ì¢…ë£Œ ì‹œê°„ | Service |
| **ì‹œê°„ ì¤‘ë³µ ë°©ì§€** | ê°™ì€ ê°•ì‚¬ì˜ ê²¹ì¹˜ëŠ” ì‹œê°„ëŒ€ ë“±ë¡ ë¶ˆê°€ | Service (DB ì¡°íšŒ) |

### 8.2 ì‹œê°„ ì¤‘ë³µ íŒë‹¨ ë¡œì§

```
ê¸°ì¡´ í´ë˜ìŠ¤: A ì‹œê°„ [start_A, end_A]
ìƒˆ í´ë˜ìŠ¤: B ì‹œê°„ [start_B, end_B]

ì¤‘ë³µ ì¡°ê±´:
1. Bê°€ A ë‚´ë¶€: start_A < start_B < end_A
2. Bê°€ Aë¥¼ í¬í•¨: start_B < start_A < end_B
3. Bê°€ Aì™€ êµì°¨: start_B < end_A AND end_B > start_A

SQL:
WHERE (start_at < end_B AND end_at > start_B)
```

### 8.3 ì´ë¯¸ì§€ ê´€ë ¨ ê·œì¹™

| ê·œì¹™ | ì„¤ëª… | ê²€ì¦ ìœ„ì¹˜ |
|-----|------|---------|
| **ìµœì†Œ 1ê°œ** | ìµœì†Œ 1ê°œ ì´ìƒì˜ ì´ë¯¸ì§€ í•„ìˆ˜ | Controller (`@NotEmpty`) |
| **ìµœëŒ€ 8ê°œ** | ìµœëŒ€ 8ê°œê¹Œì§€ ë“±ë¡ ê°€ëŠ¥ | Controller (`@Size(max=8)`) |
| **ëŒ€í‘œ ì´ë¯¸ì§€** | ì •í™•íˆ 1ê°œë§Œ `isRepresentative=true` | Service |
| **ì €ì¥ ìœ„ì¹˜** | ë¡œì»¬ ì„œë²„ (ì¶”í›„ AWS S3 ì´ì „) | File Upload Handler |

### 8.4 ì¹´í…Œê³ ë¦¬ ê·œì¹™

- **ê³ ì • ëª©ë¡**: Enumìœ¼ë¡œ ì •ì˜ëœ 10ê°œ ì¹´í…Œê³ ë¦¬ë§Œ ì‚¬ìš©
- **DB ë™ê¸°í™”**: Categories í…Œì´ë¸”ì˜ ë°ì´í„°ì™€ Enum ê°’ ì¼ì¹˜
- **ê²€ì¦**: ìš”ì²­ ì‹œ ì¹´í…Œê³ ë¦¬ ì¡´ì¬ ì—¬ë¶€ í™•ì¸

### 8.5 ê°€ê²© ì •ì±…

- **ìµœì†Œ ê¸ˆì•¡**: 0ì› (ë¬´ë£Œ í´ë˜ìŠ¤ í—ˆìš©)
- **ìµœëŒ€ ê¸ˆì•¡**: ì œí•œ ì—†ìŒ
- **í†µí™”**: ì›í™”(KRW)

### 8.6 ì¸ì› ì •ì±…

- **ìµœì†Œ ì¸ì›**: 1ëª…
- **ìµœëŒ€ ì¸ì›**: ì œí•œ ì—†ìŒ

---

## 9. êµ¬í˜„ ë²”ìœ„

### 9.1 Phase 1: Core MVP (í˜„ì¬)

#### âœ… êµ¬í˜„ ëŒ€ìƒ

- [x] í´ë˜ìŠ¤ ë“±ë¡ API (`POST /api/classes`)
- [x] ë‹¤ì¤‘ ë‚ ì§œ ì„ íƒ ë° Times ìƒì„±
- [x] ì‹œê°„ ì¤‘ë³µ ê²€ì¦
- [x] ì´ë¯¸ì§€ ì—…ë¡œë“œ (ë¡œì»¬ ì„œë²„)
- [x] ëŒ€í‘œ ì´ë¯¸ì§€ ì§€ì •
- [x] ì¹´í…Œê³ ë¦¬ Enum ì •ì˜
- [x] ìœ„ì¹˜ ì •ë³´ ì €ì¥ (ì£¼ì†Œ, ì¢Œí‘œ, ìš°í¸ë²ˆí˜¸)
- [x] 12ì‹œê°„ ì „ ë“±ë¡ ì œí•œ
- [x] ê³¼ê±° ë‚ ì§œ ë°©ì§€
- [x] ì—ëŸ¬ ì²˜ë¦¬ (8ê°€ì§€ ì—ëŸ¬ ì½”ë“œ)
- [x] Service ê³„ì¸µ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

#### âŒ êµ¬í˜„ ì œì™¸

- [ ] í´ë˜ìŠ¤ ìˆ˜ì • API
- [ ] í´ë˜ìŠ¤ ì‚­ì œ API
- [ ] í´ë˜ìŠ¤ ì¡°íšŒ API
- [ ] ì´ë¯¸ì§€ íŒŒì¼ ì—…ë¡œë“œ í•¸ë“¤ëŸ¬
- [ ] Kakao Map API ì—°ë™
- [ ] AWS S3 ì´ë¯¸ì§€ ì €ì¥

### 9.2 API ì—”ë“œí¬ì¸íŠ¸ (í˜„ì¬ êµ¬í˜„)

```
POST /api/classes          âœ… í´ë˜ìŠ¤ ë“±ë¡
```

### 9.3 í…ŒìŠ¤íŠ¸ ë²”ìœ„

#### Unit Test (Service Layer)

- [x] í´ë˜ìŠ¤ ë“±ë¡ ì„±ê³µ
- [x] ì‹œê°„ ë²”ìœ„ ê²€ì¦ ì‹¤íŒ¨
- [x] ê³¼ê±° ì‹œê°„ ë“±ë¡ ì‹¤íŒ¨
- [x] 12ì‹œê°„ ì´ë‚´ ë“±ë¡ ì‹¤íŒ¨
- [x] ì‹œê°„ ì¤‘ë³µ ê²€ì¦ ì‹¤íŒ¨
- [x] ëŒ€í‘œ ì´ë¯¸ì§€ ê°œìˆ˜ ê²€ì¦ ì‹¤íŒ¨
- [x] ì¹´í…Œê³ ë¦¬ ì¡´ì¬í•˜ì§€ ì•ŠìŒ ì‹¤íŒ¨

---

## 10. í–¥í›„ í™•ì¥ ê³„íš

### 10.1 Phase 2: í´ë˜ìŠ¤ ê´€ë¦¬ (ì˜ˆì •)

```
GET    /api/classes/{id}              í´ë˜ìŠ¤ ìƒì„¸ ì¡°íšŒ
GET    /api/classes                   í´ë˜ìŠ¤ ëª©ë¡ ì¡°íšŒ (ê²€ìƒ‰, í•„í„°ë§)
PUT    /api/classes/{id}              í´ë˜ìŠ¤ ìˆ˜ì •
DELETE /api/classes/{id}              í´ë˜ìŠ¤ ì‚­ì œ
GET    /api/classes/my                ë‚´ê°€ ë“±ë¡í•œ í´ë˜ìŠ¤ ì¡°íšŒ
```

### 10.2 Phase 3: ì´ë¯¸ì§€ ì—…ë¡œë“œ (ì˜ˆì •)

```
POST /api/classes/images/upload      ì´ë¯¸ì§€ íŒŒì¼ ì—…ë¡œë“œ
```

**êµ¬í˜„ ì‚¬í•­**:
- Multipart File ì²˜ë¦¬
- ì´ë¯¸ì§€ ê²€ì¦ (í˜•ì‹, í¬ê¸°)
- ë¡œì»¬ ì„œë²„ ì €ì¥ â†’ AWS S3 ì´ì „
- ì¸ë„¤ì¼ ìë™ ìƒì„±

### 10.3 Phase 4: ìœ„ì¹˜ ê²€ìƒ‰ (ì˜ˆì •)

```
GET /api/classes/locations/search?query={ì£¼ì†Œ}
```

**êµ¬í˜„ ì‚¬í•­**:
- Kakao Map API ì—°ë™
- ì£¼ì†Œ â†’ ì¢Œí‘œ ë³€í™˜
- ì£¼ì†Œ ìë™ì™„ì„±

### 10.4 Phase 5: ì˜ˆì•½ ì‹œìŠ¤í…œ (ì˜ˆì •)

```
POST   /api/reservations              í´ë˜ìŠ¤ ì˜ˆì•½
GET    /api/reservations/{id}         ì˜ˆì•½ ìƒì„¸ ì¡°íšŒ
DELETE /api/reservations/{id}         ì˜ˆì•½ ì·¨ì†Œ
```

**ê³ ë ¤ ì‚¬í•­**:
- ë™ì‹œ ì˜ˆì•½ ì²˜ë¦¬ (Optimistic Lock)
- ì •ì› ì´ˆê³¼ ë°©ì§€
- ì˜ˆì•½ í™•ì •/ëŒ€ê¸° ìƒíƒœ ê´€ë¦¬

### 10.5 Phase 6: ì•Œë¦¼ ì‹œìŠ¤í…œ (ì˜ˆì •)

- í´ë˜ìŠ¤ ì‹œì‘ 24ì‹œê°„ ì „ ì•Œë¦¼
- ì˜ˆì•½ í™•ì •/ì·¨ì†Œ ì•Œë¦¼
- ê°•ì‚¬ì˜ í´ë˜ìŠ¤ ë“±ë¡ í™•ì¸ ì•Œë¦¼

---

## 11. ê¸°ìˆ  ìŠ¤íƒ

### Backend

- **Framework**: Spring Boot 3.5.7
- **Language**: Java 21
- **Database**: MySQL
- **ORM**: Spring Data JPA
- **Security**: Spring Security + JWT
- **Validation**: Jakarta Validation
- **Documentation**: SpringDoc OpenAPI

### ê°œë°œ ê·œì¹™

- **Architecture**: Layered (Controller â†’ Service â†’ Repository)
- **DTO**: Java Record ì‚¬ìš©
- **Testing**: JUnit 5 + Mockito + AssertJ
- **Logging**: SLF4J + Logback
- **Exception**: GlobalExceptionHandler + CustomException

---

## 12. ì²´í¬ë¦¬ìŠ¤íŠ¸

### ê°œë°œ ì™„ë£Œ ì¡°ê±´

- [ ] CategoryType Enum ì •ì˜
- [ ] ErrorCode ì¶”ê°€ (8ê°œ)
- [ ] CustomException ì •ì˜ (4ê°œ)
- [ ] CreateClassRequest DTO ìƒì„±
- [ ] CreateClassResponse DTO ìƒì„±
- [ ] TimesRepository.findOverlappingTimes() êµ¬í˜„
- [ ] ClassService.createClass() êµ¬í˜„
- [ ] ClassController.createClass() êµ¬í˜„
- [ ] Entity ì—°ê´€ê´€ê³„ ì„¤ì • (Classes â†” Times, Images)
- [ ] Service ê³„ì¸µ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (7ê°œ í…ŒìŠ¤íŠ¸)
- [ ] SecurityConfigì— `/api/classes` ê²½ë¡œ ì¶”ê°€
- [ ] Postman ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- [ ] ì½”ë“œ ë¦¬ë·° ì™„ë£Œ
- [ ] PRD ë¬¸ì„œ ì—…ë°ì´íŠ¸

### í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] í´ë˜ìŠ¤ ë“±ë¡ ì„±ê³µ (200 OK)
- [ ] í•„ìˆ˜ ì…ë ¥ê°’ ëˆ„ë½ (400 Bad Request)
- [ ] ê³¼ê±° ë‚ ì§œ ì„ íƒ (400 Bad Request)
- [ ] 12ì‹œê°„ ì´ë‚´ ë“±ë¡ (400 Bad Request)
- [ ] ì‹œê°„ ë²”ìœ„ ì˜¤ë¥˜ (400 Bad Request)
- [ ] ì‹œê°„ ì¤‘ë³µ (409 Conflict)
- [ ] ì´ë¯¸ì§€ ê°œìˆ˜ ì˜¤ë¥˜ (400 Bad Request)
- [ ] ëŒ€í‘œ ì´ë¯¸ì§€ ê°œìˆ˜ ì˜¤ë¥˜ (400 Bad Request)
- [ ] ì¸ì¦ ì—†ìŒ (401 Unauthorized)

---

## 13. ì°¸ê³  ìë£Œ

### ê´€ë ¨ ë¬¸ì„œ

- [Architecture Guide](../../architecture.md)
- [API Design Guide](../../api_design.md)
- [Exception Handling Guide](../../exception_handling.md)
- [Testing Guide](../../testing.md)
- [Database & JPA Guide](../../database_jpa.md)

### Entity íŒŒì¼

- `User.java` - ì‚¬ìš©ì ì—”í‹°í‹°
- `Classes.java` - í´ë˜ìŠ¤ ì—”í‹°í‹°
- `Categories.java` - ì¹´í…Œê³ ë¦¬ ì—”í‹°í‹°
- `Times.java` - ì‹œê°„ ì—”í‹°í‹°
- `Images.java` - ì´ë¯¸ì§€ ì—”í‹°í‹°

---

**ìµœì¢… ìˆ˜ì •ì¼**: 2025-01-14  
**ìŠ¹ì¸ì**: -  
**ìƒíƒœ**: ğŸ“ Draft â†’ ğŸš§ In Progress â†’ âœ… Completed

